(()=>{function e(e){return Array.isArray(e)?e.map((e=>t(e)?e:"[Filtered: unsafe object]")):t(e)?e:"[Filtered: unsafe object]"}function t(e){if(!e)return!0;if("object"==typeof e){if(e===window||e===document)return!1;if("undefined"!=typeof Node&&e instanceof Node)return!1;if("undefined"!=typeof Window&&e instanceof Window)return!1}return!0}const o="7.6.0",n=864e5,r="storage_expiry",a="storage_expiry_duration",s={SQ:{local:"localhost:3000",dev_ldt:"selectquote.outliant.com",dev:"selectquote.outliant.com",staging:"stg-selectquote.outliant.com",production:"selectquote.com"},LSQ:{dev_ldt:"ldt-selectquote.outliant.com",dev:"life-selectquote.outliant.com",staging:"stg-life-selectquote.outliant.com",production:"life.selectquote.com"},HAA:{dev_ldt:"homeandauto.outliant.com",dev:"homeandauto.outliant.com",staging:"stg-homeandauto.outliant.com",production:"homeandauto.selectquote.com"},MSQ:{dev_ldt:"medicare-selectquote.outliant.com",dev:"medicare-selectquote.outliant.com",staging:"stg-medicare-selectquote.outliant.com",production:"medicare.selectquote.com"},MHL:{dev_ldt:"medicare-helpline.outliant.com",dev:"medicare-helpline.outliant.com",staging:"stg-medicare-helpline.outliant.com",production:"medicarehelpline.com"},LIS:{dev_ldt:"lifeinsurancesavings.outliant.com",dev:"lifeinsurancesavings.outliant.com",staging:"stg-lifeinsurancesavings.outliant.com",production:"lifeinsurancesavings.com"},BES:{dev_ldt:"burial-expense.outliant.com",dev:"burial-expense.outliant.com",staging:"stg-burial-expense.outliant.com",production:"burialexpense.com"}},i=[{siteKey:"SQ",seo:{sCode:"ULMS",nextSCode:"UUMS"},referrer:{sCode:"2UMS",nextSCode:"UZMS"},direct:{sCode:"UCMS",nextSCode:"USMS"}},{siteKey:"LSQ",seo:{sCode:"SNMS",nextSCode:"UJMS"},referrer:{sCode:"1UMS",nextSCode:"UMMS"},direct:{sCode:"EDMS",nextSCode:"UKMS"}},{siteKey:"HAA",seo:{sCode:"SQAHSEO",nextSCode:"xsseoml"},referrer:{sCode:"SQAHREF",nextSCode:"xsrefml"},direct:{sCode:"SQAHDE",nextSCode:"xsdeml"}},{siteKey:"MSQ",seo:{sCode:"SQSSEO",nextSCode:"xsseoahl"},referrer:{sCode:"SQSREF",nextSCode:"xsrefahl"},direct:{sCode:"SQSDE",nextSCode:"xsdeahl"}},{siteKey:"MHL",seo:{sCode:"MHLSEO",nextSCode:"MHLSEO"},referrer:{sCode:"MHLREF",nextSCode:"MHLREF"},direct:{sCode:"MHLDE",nextSCode:"MHLDE"}},{siteKey:"LIS",seo:{sCode:"SRMS",nextSCode:null},referrer:{sCode:"BVMS",nextSCode:null},direct:{sCode:"EHMS",nextSCode:null}},{siteKey:"BES",seo:{sCode:"SYMS",nextSCode:null},referrer:{sCode:"BZMS",nextSCode:null},direct:{sCode:"EJMS",nextSCode:null}}],c=[{matchPaths:["/medicare/medicare-plans/advantage-plans"],desktop:{seoKeyword:"sqsstateadvdesk",phoneNumber:"1-833-703-7236"},mobile:{seoKeyword:"sqsstateadvmob",phoneNumber:"1-844-976-4879"}},{matchPaths:["/medicare/medicare-plans/supplement-plans"],desktop:{seoKeyword:"sqsstatesuppdesk",phoneNumber:"1-866-785-2413"},mobile:{seoKeyword:"sqsstatesuppmob",phoneNumber:"1-833-333-3956"}},{matchPaths:["/medicare/carriers","/medicare/ancillary-carriers"],desktop:{seoKeyword:"sqscarrierdesk",phoneNumber:"1-833-694-3346"},mobile:{seoKeyword:"sqscarriermob",phoneNumber:"1-888-675-3526"}},{matchPaths:["/medicare/medicare-enrollment-periods"],desktop:{seoKeyword:"sqsmedenrolldesk",phoneNumber:"1-844-242-1733"},mobile:{seoKeyword:"sqsmedenrollmob",phoneNumber:"1-844-291-9139"}},{matchPaths:["/medicare/articles"],desktop:{seoKeyword:"sqsartdesk",phoneNumber:"1-866-681-5625"},mobile:{seoKeyword:"sqsartmob",phoneNumber:"1-844-572-9436"}},{matchPaths:["/medicare/additional-coverage","/medicare/faqs","/medicare/government-resources","/medicare/lower-medicare-costs","/medicare/medicare-card","/medicare/medicare-caregiver","/medicare/medicare-changes","/medicare/medicare-checklist","/medicare/medicare-cost","/medicare/medicare-eligibility","/medicare/medicare-employer-coverage","/medicare/medicare-enrollment-periods/when-can-i-enroll-quiz","/medicare/medicare-parts","/medicare/medicare-plans","/medicare/overview","/medicare/resources","/medicare/retirement-and-medicare","/medicare/selectquote-difference","/medicare"],desktop:{seoKeyword:"sqsorgdesk",phoneNumber:"1-844-665-1035"},mobile:{seoKeyword:"sqsorgmob",phoneNumber:"1-833-404-4555"}}],d=[{matchPaths:["/medicare-plans/advantage-plans"],desktop:{seoKeyword:"mhladvplansdmadesk",phoneNumber:"1-877-790-2366"},mobile:{seoKeyword:"mhladvplansdmamob",phoneNumber:"1-877-790-2463"}},{matchPaths:["/medicare-plans/supplement-plans","/medicare-plans/prescription-drug-plans","/medicare-plans"],desktop:{seoKeyword:"mhlmedplansdesk",phoneNumber:"1-855-912-2108"},mobile:{seoKeyword:"mhlmedplansmob",phoneNumber:"1-877-790-2343"}},{matchPaths:["/articles/medicare-advantage-plans-pros-cons","/articles/medicare-advantage-open-enrollment-period"],desktop:{seoKeyword:"mhlacqartdesk",phoneNumber:"1-844-678-1115"},mobile:{seoKeyword:"mhlacqartmob",phoneNumber:"1-844-860-6466"}},{matchPaths:["/articles"],desktop:{seoKeyword:"mhllifedesk",phoneNumber:"1-877-791-3168"},mobile:{seoKeyword:"mhllifemob",phoneNumber:"1-877-832-5183"}},{matchPaths:["/medicare-enrollment"],desktop:{seoKeyword:"mhlmedenrolldesk",phoneNumber:"1-877-834-7885"},mobile:{seoKeyword:"mhlmedenrollmob",phoneNumber:"1-833-785-7111"}},{matchPaths:["/medicare-eligibility","/medicare-coverage"],desktop:{seoKeyword:"mhlmedcovdesk",phoneNumber:"1-877-235-1364"},mobile:{seoKeyword:"mhlmedcovmob",phoneNumber:"1-833-944-1484"}},{matchPaths:["/","/faqs"],desktop:{seoKeyword:"mhlproductdesk",phoneNumber:"1-877-505-9845"},mobile:{seoKeyword:"mhlproductmob",phoneNumber:"1-844-703-1247"}}],l=(()=>{const e={},t=(t,o)=>{Array.isArray(o)&&o.forEach((o=>{o&&["desktop","mobile"].forEach((n=>{const r=o?.[n]?.seoKeyword;r&&(e[String(r).trim()]=t)}))}))};return t("MSQ",c),t("MHL",d),e})(),m=e=>{try{const t=new URL(window.location.href).pathname,n=((e,t)=>{try{const o=D(e),n=Object.values(s.MSQ),r=Object.values(s.MHL);return n.includes(o)?"MSQ":r.includes(o)?"MHL":Object.values(s.SQ).includes(o)&&t.startsWith("/medicare")?"MSQ":null}catch{return null}})(e,t);if(!n)return;const r=(()=>{try{return(window.innerWidth||document.documentElement.clientWidth||0)<=767?"mobile":"desktop"}catch{return"desktop"}})(),a=((e,t)=>{const o="MSQ"===e?c:"MHL"===e?d:null;if(!o)return null;t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));for(const e of o)if((e?.matchPaths||[]).some((e=>{if(!e)return!1;let o=e;return o.length>1&&o.endsWith("/")&&(o=o.slice(0,-1)),t===o||t.startsWith(o+"/")})))return e;return null})(n,t);if(!a)return;const i=a?.[r]?.seoKeyword,m=a?.[r]?.phoneNumber;if(!i)return;const u=E("sCode")||w("sCode")||w("domain-tracking-scode"),h=C(n),g=P(h),S=g?.seo?.sCode,y=u&&l[u];let b=!1;if(u&&!y)try{const t=x(u);if("SEO"===t?.type){const o=D(e),n=t.domain?D(t.domain):null;b=Boolean(n)&&n!==o&&u!==S}}catch(e){p.warn("Foreign SEO evaluation failed",{currentSCode:u,error:e?.message})}if(!(!u||u===S||y||b))return;if(u===i){try{const e=w("site_session_data"),a=e?JSON.parse(e):{};if(!a.site_campaign_phone&&m){a.site_campaign_phone=m,f("site_session_data",JSON.stringify(a));try{window.dispatchEvent(new CustomEvent("cdtPagePhoneUpdated",{detail:{phoneNumber:m,sCode:i,pathname:t,device:r,domainKey:n,version:o,reason:"hydratePhoneOnly"}}))}catch(e){p.warn("Failed dispatching cdtPagePhoneUpdated hydrate event",e)}}}catch(e){p.warn("Failed phone hydration when sCode already matched",e)}return}p.log("Page SEO Override Applied",{domainKey:n,pathname:t,device:r,previousSCode:u,newSCode:i,baseSeoSCode:S,phoneNumber:m}),M(i);try{const e=w("site_session_data"),a=e?JSON.parse(e):{};if(m&&(a.site_campaign_phone=m),f("site_session_data",JSON.stringify(a)),m)try{window.dispatchEvent(new CustomEvent("cdtPagePhoneUpdated",{detail:{phoneNumber:m,sCode:i,pathname:t,device:r,domainKey:n,version:o}}))}catch(e){p.warn("Failed dispatching cdtPagePhoneUpdated event",e)}}catch(e){p.warn("Failed to update site_session_data.site_campaign_phone",e)}const v=L("sCode",i,window.location.href);v!==window.location.href&&history.replaceState(null,"",v)}catch(e){g(e,"attemptPageSpecificSeoOverride")}},u=e=>{const t=new WeakSet;try{return JSON.stringify(e,((e,o)=>{if("object"==typeof o&&null!==o){if(t.has(o))return;t.add(o)}return o}),2)}catch(e){return"[Unserializable object]"}},h={enabled:!1,setDebug:e=>{h.enabled=e,console.log(`CDT v${o} Debug mode: ${e?"enabled":"disabled"}`),f("cdt_debug",e.toString())}},p={log(t,...n){if(h.enabled){const r=this.getCaller();console.log(`[CDT INFO v${o}] ${r}: ${t}    \n`,u(e(n)))}},warn(t,...n){const r=this.getCaller();console.warn(`[CDT WARNING v${o}] ${r}: ${t}    \n`,u(e(n)))},error(e,...t){const n=this.getCaller();console.error(`[CDT Error v${o}] ${n}: ${e}    \n`,...t)},trace(e,...t){if(h.enabled){const n=this.getCaller();console.trace(`%c[CDT Trace v${o}] ${n}: ${e}`,genHexShade("#9E9E9E",n),...t)}},getCaller(){try{const e=(new Error).stack.split("\n"),t=(e[3]||e[2]).match(/at (\S+)/);return t?t[1]:"Unknown"}catch{return"Unknown"}}},g=(e,t)=>{p.error(`Error in ${t}:`,e),p.error("Stack trace:",e.stack)},S=(()=>{let e=null;return(t=864e5)=>{const o=new URLSearchParams(window.location.search),n=r,s={[`${n}_hrs`]:36e5,[`${n}_mins`]:6e4,[`${n}_secs`]:1e3},i=Object.entries(s).reduce(((e,[t,n])=>{if(null!==e)return e;const r=parseInt(o.get(t));return!isNaN(r)&&r>0?r*n:null}),null);if(null!==i){e=i,localStorage.setItem(a,e.toString());const t=Date.now();localStorage.setItem(r,(t+e).toString())}else{if(null!==e)return e;{const o=localStorage.getItem(a);e=o?parseInt(o):t,localStorage.setItem(a,e.toString())}}return e}})(),f=(e,t,o="both")=>{const a=localStorage.getItem(r),s=Date.now();if(!a||a<s){const e=S(n);localStorage.setItem(r,s+e)}"both"===o?(sessionStorage.setItem(e,t),localStorage.setItem(e,t)):"session"===o?sessionStorage.setItem(e,t):"local"===o&&localStorage.setItem(e,t)},w=(e,t="both")=>{const o="both"===t?sessionStorage.getItem(e)||localStorage.getItem(e):"session"===t?sessionStorage.getItem(e):localStorage.getItem(e),n=localStorage.getItem(r),a=n&&n<Date.now();return o&&!a?o:null},C=e=>{try{let t="production";const o=window.location.host,n=o.includes("outliant"),r=o.includes("stg"),a=n&&!r,i=n&&o.includes("ldt-");return window.location.host.includes("localhost")&&"SQ"===e?t="local":i?t="dev_ldt":a?t="dev":r&&(t="staging"),s[e]?.[t]??null}catch(e){return g(e,"getEnvironmentDomain"),null}},y=i.map((e=>e.siteKey?{...e,domain:C(e.siteKey),domains:Object.values(s[e.siteKey])}:e)),b=y.flatMap((e=>e.domains)),v=(new Set(i.flatMap((e=>[e.seo?.sCode,e.referrer?.sCode,e.direct?.sCode].filter(Boolean)))),(e,t)=>new URL(t).pathname.startsWith(e)),E=(e,t=window.location.href)=>{try{const o=new URL(t),n=new URLSearchParams(o.search),r=new URLSearchParams;for(const[e,t]of n)r.append(e.toLowerCase(),t);return r.get(e.toLowerCase())}catch(e){return g(e,"getURLVariable"),null}},L=(e,t,o=window.location.href)=>{try{const n=new URL(o),r=new URLSearchParams(n.search);return t&&r.set(e,t),n.search=r.toString(),n.href}catch(e){return g(e,"setURLVariable"),o}},U=e=>{try{const t=e.startsWith("localhost"),o=e.startsWith("tel:"),n=e.startsWith("http");return(t?`http://${e}`:o||n?e:`https://${e}`).replace("www.","")}catch(t){return g(t,"getSanitizedURL"),e}},D=e=>{try{const t=U(e);if(!(e=>{try{return new URL(e),!0}catch{return!1}})(t))return p.error("getSanitizedHost Error - Invalid URL provided:",e),t;const o=new URL(t);return t.includes("localhost")?o.host:o.hostname}catch(t){return g(t,"getSanitizedHost"),U(e)}},R=async(e,t,o=!1)=>{try{const n=Boolean(window?.next);let r=((e,t)=>{try{if(!t)return e;const o=new URL(e),n=new URLSearchParams(o.search);return new URLSearchParams(t).forEach(((e,t)=>{n.set(t,e)})),o.search=n.toString(),o.href}catch(t){return g(t,"mergeUrlWithVariables"),e}})(t,w("domain-tracking-url-variables"));const a=C("HAA"),i=C("LSQ"),c=C("MSQ"),d=C("SQ"),l=w("site_session_data"),m=w("firstURL");if(l){const e=JSON.parse(l);r=L("pass_sid",e.site_session_id,r)}m&&(r=L("first_url",m,r));const u=D(window.location.href),S=D(r),f=Object.values(s.SQ),y=Object.values(s.LSQ),b=f.includes(u)&&y.includes(S);if(b){const e=w("pass_lp");e&&(r=L("pass_lp",e,r),p.log("Evaluated isSQtoLSQ condition",{fromDomain:u,toDomain:S,isSQtoLSQ:b,passLp:e}))}const U=w("domain-tracking-canvas");let R=E("sCode",r)||w("domain-tracking-scode")||w("sCode"),k=D(t);const x=new URL(r),P=Object.values(s.SQ),O=P.includes(k),A=v("/auto-and-home-insurance",t),I=v("/life-insurance",t),K=v("/medicare",t);if(r=L("pass_cid",U,r),O&&(A&&(k=a),I&&(k=i),K&&(k=c)),R||(R=_(k,"DIRECT")||"UCMS",p.warn(`sCode missing, using fallback: ${R}`,{sCode:R,urlHostName:k,newUrlString:r}),M(R)),R&&"string"==typeof R){const t=await N(e,k,R);r=L("sCode",t,r),p.log("sCodeByHistory",{sCodeByHistory:t,sCode:R,urlHostName:k})}try{const e=w("site_session_data");if(e){const t=JSON.parse(e).site_campaign_phone;if(t){const e=D(window.location.href),o=D(r),n=Object.values(s.MSQ),a=Object.values(s.MHL),i=/^\/medicare(\/|-|$)/i.test(window.location.pathname);(i||n.includes(e)||n.includes(o)||a.includes(e)||a.includes(o))&&(r=L("pass_phone",encodeURIComponent(t),r))}}}catch(e){p.warn("Failed adding pass_phone",e)}const q=new URL(r);q.pathname=q.pathname.replace(/\/$/,""),r=q.href;const H=window.location.href.replace("www.",""),Q=new URL(H),$=Q.pathname,j=r.includes("#"),T=(new URL(x)?.host??"")===Q?.host,F=$===q.pathname,B=T&&F,W=j||B;if(p.log("Initial Params Check",{args:{currentDomain:e,url:t},sCode:R,urlInfo:{urlParts:q,urlHostName:k,newUrl:x,newUrlString:r,windowUrl:H,currentUrl:Q,currentPath:$},domainChecks:{isHaaPath:A,isLsqPath:I,isMsqPath:K,isParentDomain:O},parentDomains:P,isAnchor:j,isSamePageAnchor:W,pageMatchCheck:{isSameHost:T,isSamePath:F,isSamePage:B,currentPath:$,urlPartsPath:q.pathname},willRunUpdateUrl:r!==window.location.href,env:{currentDomain:e,parentDomain:d,msqDomain:c,lsqDomain:i,haaDomain:a}}),W)return void document.getElementById(q.hash.substring(1))?.scrollIntoView();if(r!==window.location.href){const t=D(r),a=D(window.location.href),s=t!==a;p.log("Internal/External Domain Check",{currentDomain:e,windowDomain:a,newDomain:t,isExternalDomain:s,isNextJs:n,isAddSearchLink:o});const i=()=>{try{const t=new URL(window.location.href);if(((e,t)=>{if(!h.enabled)return;const o=new URLSearchParams(e.search),n=new URLSearchParams(t.search),r=new Set([...o.keys(),...n.keys()]),a={};r.forEach((e=>{const t=o.get(e),r=n.get(e);let s="Unchanged";!t&&r?s="Added":t&&!r?s="Removed":t!==r&&(s="Changed"),a[e]={Status:s,"New Value":r||"(not set)","Old Value":t||"(not set)"}})),console.group("URL Change Detection"),console.log("%cURL Changes:","font-weight: bold; font-size: 14px;"),console.log("%c Old URL: ","background-color:#ffbb00; color: white;",e.href),console.log("%c New URL: ","background-color:#12b300; color: white;",t.href),console.log("%cParameter Changes:","font-weight: bold; font-size: 14px;"),console.table(a),console.groupEnd()})(t,new URL(r,window.location.origin)),!r.includes("sCode"))throw p.warn(`sCode (${R}) not found in URL: ${r}`,{newUrlString:r,sCode:R,urlHostName:k,currentDomain:e}),new Error(`sCode not found in URL: ${r}`);s?(p.log("External Domain Redirect",{newUrlString:r,isNextJs:n}),window.location.href=r):(p.log("Internal Domain Update",{newUrlString:r,isNextJs:n}),n?window?.next?.router?.replace(r):window.history.replaceState(null,"",r),window.dispatchEvent(new Event("cdtUrlChange")))}catch(e){g(e,"redirectWithParams - updateUrl"),console.trace(e)}},c=()=>{let e=0;const t=()=>{if(p.log("Checking GTM and executing updateUrl",{attempts:e,maxAttempts:100,checkInterval:5,dataLayer:window.dataLayer}),e>=100)return p.warn("Max attempts reached waiting for GTM. Executing updateUrl."),void i();window.dataLayer?requestAnimationFrame((()=>{p.log("GTM Loaded. Executing updateUrl."),i()})):(e++,setTimeout(t,5))};t()};if(!n||s||o)p.log("Non-Next.js Route Change Handler",{isNextJs:n,isExternalDomain:s,isAddSearchLink:o}),c();else{p.log("Next.js Route Change Handler",{isNextAndInternal:n&&!s,isAddSearchLink:o});const e=()=>{p.log("routeChangeHandler Start",{}),window.removeEventListener("nextjsRouteChangeComplete",e),c()};window.addEventListener("nextjsRouteChangeComplete",e)}}else p.warn("redirectWithParams - URLs are the same, no update needed",{url:t,currentUrl:window.location.href,currentDomain:e,newUrlString:r,isParentDomain:O,isSamePageAnchor:W,willRunUpdateUrl:r!==window.location.href})}catch(e){g(e,"redirectWithParams"),window.removeEventListener("nextjsRouteChangeComplete",(()=>{}))}},k=new Map,_=(e,t)=>{try{const o=P(e);if(void 0===o)return null;switch(t){case"DIRECT":return o.direct.sCode;case"SEO":return o.seo.sCode;case"REFERRER":return o.referrer.sCode;default:return null}}catch(e){return g(e,"getScodeByOrigin"),null}},x=e=>{try{const t=y.find((t=>t.seo.sCode===e||t.seo.nextSCode===e)),o=y.find((t=>t.referrer.sCode===e||t.referrer.nextSCode===e)),n=y.find((t=>t.direct.sCode===e||t.direct.nextSCode===e));let r=null;if(!t&&l[e]){const t=l[e];r=C(t)}const a={domain:t?.domain||r||o?.domain||n?.domain,sCode:e,type:t||r?"SEO":o?"REFERRER":n?"DIRECT":null};return p.log("sCode values",{...a,mappedResults:{seoMapped:t,pageSpecificSeoDomain:r,referrerMapped:o,directMapped:n}}),a}catch(e){return g(e,"getDataByScode"),null}},N=async(e,t,n)=>{try{e=D(e),t=D(t);const r=x(n),a=P(t),s=C("SQ"),i=C("MSQ"),c=C("LSQ"),d=C("HAA"),l=Boolean(E("cid")),m=l&&t===i&&[c,d,s].includes(e),u=l&&t===c&&[i,d,s].includes(e),h=l&&t===d&&[i,c,s].includes(e),S=l&&t===s&&[i,c,d,s].includes(e),f=await(async e=>{const t=`https://d9fs82ix42pq1.cloudfront.net/dev/sqcmp1/get_campaigns_table_csv?campaignKey=${e}`;try{if(k&&k.has(e))return k.get(e);if(!e||"string"!=typeof e)throw new Error("sCode is required");const o=await fetch(t);if(!o.ok)return null;const n=await o.json(),r=n&&n.length>0?n[0]:null;return k.set(e,r),r}catch(n){return console.error(`[CDT Error v${o}] getCampaign error: sCode Check`,{"s-C-o-d-e":e?"string"==typeof e?e.split("").join(" "):String(e):null,endpoint:t?t.split("?")[0]+"?...":null}),g(n,"getCampaign"),null}})(n),w=(e=>{try{const t=D(e),o=C("HAA"),n=C("LSQ"),r=C("MSQ"),a=C("SQ");switch(t){case r:return"MSQ";case n:return"LSQ";case o:return"HSQ";case a:return"BSQ";default:return null}}catch(e){return g(e,"getSiteId"),null}})(t),y=!!f&&(f.Category?.includes("Paid")&&f["Site ID"]?.includes(w)),b={currentScode:n,sCodeObj:r,siteId:w,hasUrlCid:l,keepCampaignKey:y,campaignData:f,domains:{msqDomain:i,lsqDomain:c,haaDomain:d,parentDomain:s,currentDomain:e,domain:t},toEnv:{toMedicare:m,toLife:u,toHomeAndAuto:h,toParentDomain:S}};if(p.log("check",b),m){const e=y?n:"xspaidahl";return p.log("toMedicare",{finalSCode:e,...b}),e}if(u){const e=y?n:"UIMS";return p.log("toLife",{finalSCode:e,...b}),e}if(h){const e=y?n:"xspaidml";return p.log("toHomeAndAuto",{finalSCode:e,...b}),e}if(S){const e=y?n:"UOMS";return p.log("toParentDomain",{finalSCode:e,...b}),e}if(!r.domain)return p.log("No domain found",b),n;if(e===t)return p.log("Same domain",b),n;switch(r.type){case"SEO":const e=a?.seo?.nextSCode;return p.log("SEO SCode",{finalSCode:e,...b}),e;case"REFERRER":const t=a?.referrer?.nextSCode;return p.log("Referrer SCode",{finalSCode:t,...b}),t;case"DIRECT":const o=a?.direct?.nextSCode;return p.log("Direct SCode",{finalSCode:o},b),o;default:return p.warn("Default Case: No SCode found",{finalSCode:n,...b}),n}}catch(e){return g(e,"getScodeByHistory"),n}},M=e=>{try{if("string"!=typeof e)return void p.error("setScode Error - Invalid sCode:",e);e=e.replace(/['"]/g,"")?.split("?")[0],f("domain-tracking-scode",e),f("sCode",e)}catch(e){g(e,"setScode")}},P=e=>{try{const t=D(e);return y.find((e=>e.domains.includes(t)))}catch(e){return void g(e,"getDataByDomain")}},O=e=>{try{const t=D(e);if(!b.includes(t))return;if(!w("domain-tracking-canvas")){const e=(()=>{try{const e="browser fingerprint",t=document.createElement("canvas"),o=t.getContext("2d");if(!o)return"";o.textBaseline="top",o.font="14px 'Arial'",o.textBaseline="alphabetic",o.fillStyle="#f60",o.fillRect(125,1,62,20),o.fillStyle="#069",o.fillText(e,2,15),o.fillStyle="rgba(102, 204, 0, 0.7)",o.fillText(e,4,17);const n=t.toDataURL().replace("data:image/png;base64,",""),r=[...atob(n)].reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)),0);return Math.abs(r).toString(36).padEnd(20,"0").slice(0,20).toUpperCase()}catch(e){return g(e,"generateDeviceID"),""}})();f("domain-tracking-canvas",e)}(e=>{try{document.body.addEventListener("click",(t=>{let o=t.target;for(;o&&"a"!==o.tagName.toLowerCase()&&o!==document.body;)o=o.parentNode;if(o&&"a"===o.tagName.toLowerCase()){const n=o.getAttribute("href");if(!n)return;const r=o.hasAttribute("data-analytics-click"),a="_blank"===o.getAttribute("target")||t.ctrlKey||t.metaKey,s=new URL(n,window.location.origin),i=D(s.href);!b.includes(i)&&i!==e||a?p.log("handleAllRedirects - Allowing default behavior",{urlHost:i,isNewTab:a,isAddSearchLink:r,SUPPORTED_DOMAINS:b}):(t.preventDefault(),p.log("handleAllRedirects - Prevented default redirect",{currentDomain:e,supportedDomains:b,isSupportedDomain:b.includes(i),urlHost:i,isNewTab:a,isAddSearchLink:r,href:s.href}),R(e,s.href,r))}}))}catch(e){g(e,"handleAllRedirects")}})(t)}catch(e){g(e,"setDOMElements")}},A=()=>{const e=window.history.pushState;window.history.pushState=function(...t){if(!(new Error).stack.includes("addsearch-search-ui.min.js"))return e.apply(this,t)}},I=e=>{try{"loading"!==document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):"attachEvent"in document&&document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&e()}))}catch(e){g(e,"ready")}};"true"!==E("cdt_debug")&&"true"!==w("cdt_debug")||h.setDebug(!0),S(),(()=>{try{console.log(`Cross Domain Tracking Version: ${o}`),A();let e=D(window.location.href);const t=window.location.href,n=D(C("SQ")),r=Object.values(s.SQ).includes(e),a=C("LSQ"),i=C("HAA"),c=C("MSQ"),d=v("/auto-and-home-insurance",t),l=v("/life-insurance",t),u=v("/medicare",t),h=""===document.referrer||document.referrer.includes(e);if(r&&(u&&(e=c),l&&(e=a),d&&(e=i)),m(e),!w("firstURL")){const e=E("first_url")||window.location.href;f("firstURL",e),f("domain-tracking-first-url",e)}try{const e=E("pass_phone");if(e){const t=Object.values(s.MSQ).map(D),o=Object.values(s.MHL).map(D),n=D(window.location.href),r=/^\/medicare(\/|-|$)/i.test(window.location.pathname);if(t.includes(n)||o.includes(n)||r){const t=decodeURIComponent(e),o=w("site_session_data"),n=o?JSON.parse(o):{};n.site_campaign_phone||(n.site_campaign_phone=t,f("site_session_data",JSON.stringify(n),"session"))}}}catch(e){p.warn("pass_phone hydration failed",e)}if(!w("pass_lp")){const e=E("pass_lp");e&&f("pass_lp",e)}!w("domain-tracking-url-variables")&&window.location.search&&f("domain-tracking-url-variables",window.location.search),f("domain-tracking-referrer",document.referrer);const S=w("site_session_data");if(E("pass_sid")&&S){const e=JSON.parse(S);e.site_session_id=E("pass_sid"),f("site_session_data",JSON.stringify(e))}const L=E("sCode")||E("keyword")||w("sCode")||w("domain-tracking-scode");if(p.log("Cross Domain Tracking Info:",{currentUrl:U(window.location.href),currentScode:L,currentDomain:D(window.location.href),modifiedCurrentDomain:e,referral:{referrer:document.referrer,prevReferrer:document.referrer.includes(D(window.location.href))},checks:{isFirstPageVisit:h,isParentDomain:r,isHaaPath:d,isLsqPath:l,isMsqPath:u},domains:{envDomains:{currentDomain:e,haaDomain:i,lsqDomain:a,msqDomain:c,parentDomain:n},MAPPED_DOMAINS:y,SUPPORTED_DOMAINS:b}}),L)return M(L),m(e),void I((()=>O(e)));const R=w("sCode")||w("domain-tracking-scode"),k=(()=>{try{const e=["google","bing","yahoo","duckduckgo","ask","baidu","yandex"],t=w("domain-tracking-referrer")?w("domain-tracking-referrer").toLowerCase():document.referrer.toLowerCase();return e.some((e=>t.includes(e)))}catch(e){return g(e,"isSearchEngineReferer"),!1}})();if(R)p.log("Using existing sCode",{existingScode:R,local:w("sCode","local")||w("domain-tracking-scode","local"),session:w("sCode","session")||w("domain-tracking-scode","session")}),M(R),m(e);else if(h||k){const t=k?"SEO":"DIRECT",o=_(e,t);p.log("sCode",{sCode:o,codeOrigin:t,currentDomain:e}),M(o),m(e)}else M(_(e,"REFERRER"));I((()=>O(e)))}catch(e){g(e,"prepareEnvironment")}})()})();